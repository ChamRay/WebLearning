# 1、axios请求

## 4.3 async和await

~~~
在包含promise对象的函数前加async，在对象前加await
async getAll(){
	await axios.get('url').then(resp=>{
	
	})....
}

async函数代表这是一个异步函数，async函数返回的是promise async函数返回值不看return 必然返回promise

async 函数返回的promise是成功还是失败，看return return的结果代表promise是成功还是失败
	1、如果return的是一个非promise的值，代表成功
		成功的结果是return的结果
	2、吐过返回的是成功的promise大表asynv函数返回的promise也是成功的（他们不是同一个promise）
		成功的结果是return的结果
	3、如果返回的是失败的promise，代表async函数返回的promise是失败的
		失败的原因是return的promise失败的原因
	4、如果throw出错误，代表async函数返回的promise是失败的
		失败的原因是抛出的错误原因
		
//async await 是使用同步代码实现异步效果
~~~

# 2、跨域

## 2.1 什么是跨域

~~~
1、是什么
	浏览器上的同源策略
	
	特点：
		1、跨域只存在于浏览器
		2、不在浏览器发请求是不会存在跨域问题的
		3、http请求分为两大类：普通http请求和ajax请求（跨域是出现在ajax请求）
2、在什么地方
	浏览器给服务器发请求会跨域
	服务器给服务器发请求不会
3、什么条件会跨域
	同源（协议 ip 端口都一致）不跨域
  不同源就跨域（三个当中有一个不同就跨域）
4、解决跨域问题：前端可以解决、后端解决。一般后端解决比前端解决容易
~~~

## 2.2 配置代理服务器解决跨域问题

- 通过第三方插件解决跨域问题

~~~js
github上搜索express
安装 npm i express -S


//server.js
const express = require('express')
const app = express()

app.get('/',function(req,res){
  let response = {
    status = 200,
    data:{
    	name:'zhaoliying',
    	age:23
  	}
  }
	res.send(JSON.stringify(response))
})

app.listen(4000,function(){
  console.log('服务已经启动，在localhost:4000/users/info')
})//监听端口

~~~

- 在webpack-dev-server配置

~~~js
devServer:{
  proxy:{
    '/api':{
      //本身：8080/api/users/info
      //target 代表转发的目标服务器 4000/api/users/info
      //pathRewrite 4000/api/users/info 和真正的地方多了一个/api 需要把/api替换掉
      target:'http://localhost:4000',
      pathRewrite:{'^/api':''},//4000/users/info
      changeOrigin:true//不管改变哪个跨域的条件都会转发
    }
  }
}
~~~

